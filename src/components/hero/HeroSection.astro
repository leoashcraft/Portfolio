---
import { profile } from '../../data/profile';
import { heroTitles } from '../../data/hero';
---

<section
  id="home"
  class="relative min-h-screen flex items-center justify-center overflow-hidden"
  aria-label="Introduction"
>
  <!-- Graffiti background image (lowest layer) with parallax -->
  <div id="hero-parallax-container" class="absolute inset-0 -z-30 overflow-hidden" aria-hidden="true">
    <img
      id="hero-parallax-bg"
      src="/img/graffiti-bg.avif"
      alt=""
      class="absolute inset-0 w-[120%] h-[120%] lg:w-[150%] lg:h-[150%] object-cover object-[60%_35%] sm:object-[70%_45%] md:object-[35%_65%] lg:object-[45%_20%] will-change-transform"
    />
  </div>

  <!-- Base gradient background -->
  <div class="absolute inset-0 -z-20 bg-gradient-to-r from-[#0a0015] via-[#1a0a2a] to-[#0a0015]/50 opacity-60" aria-hidden="true"></div>

  <!-- Glowing orbs layer -->
  <div class="absolute inset-0 -z-10 overflow-hidden" aria-hidden="true">
    <div class="absolute top-[10%] left-[10%] w-72 h-72 min-[2000px]:w-[36rem] min-[2000px]:h-[36rem] bg-fuchsia-600/25 rounded-full blur-3xl min-[2000px]:blur-[128px] animate-pulse-slow"></div>
    <div class="absolute top-[60%] right-[5%] w-96 h-96 min-[2000px]:w-[48rem] min-[2000px]:h-[48rem] bg-purple-500/20 rounded-full blur-3xl min-[2000px]:blur-[128px]"></div>
    <div class="absolute bottom-[10%] left-[calc(5%+25px)] w-[20rem] h-[20rem] min-[2000px]:w-[40rem] min-[2000px]:h-[40rem] bg-neon-pink/15 rounded-3xl blur-3xl min-[2000px]:blur-[128px]"></div>
    <div class="absolute bottom-[40%] right-[15%] w-56 h-56 min-[2000px]:w-[28rem] min-[2000px]:h-[28rem] bg-orange-400/15 rounded-full blur-3xl min-[2000px]:blur-[128px]"></div>
  </div>

  <!-- Floating geometric shapes - 80s arcade carpet style with parallax -->
  <div id="hero-shapes" class="absolute inset-0 -z-10 overflow-hidden pointer-events-none" aria-hidden="true">
    <!-- Triangles with parallax -->
    <div class="absolute top-[3%] left-[15%] w-0 h-0 border-l-[20px] border-l-transparent border-r-[20px] border-r-transparent border-b-[35px] border-b-neon-pink/50 drift-1" data-parallax="0.7" data-parallax-x="0.3"></div>
    <div class="absolute bottom-[8%] right-[12%] w-0 h-0 border-l-[15px] border-l-transparent border-r-[15px] border-r-transparent border-b-[26px] border-b-neon-yellow/40 drift-2" data-parallax="0.5" data-parallax-dir="down"></div>
    <div class="absolute bottom-[20%] left-[20%] w-0 h-0 border-l-[12px] border-l-transparent border-r-[12px] border-r-transparent border-b-[20px] border-b-neon-purple/40 drift-diagonal" data-parallax="0.8" data-parallax-x="-0.2"></div>
    <div class="absolute bottom-[5%] right-[35%] w-0 h-0 border-l-[18px] border-l-transparent border-r-[18px] border-r-transparent border-b-[30px] border-b-neon-green/35 drift-3" data-parallax="0.6" data-parallax-dir="down"></div>
    <div class="absolute top-[25%] right-[5%] w-0 h-0 border-l-[10px] border-l-transparent border-r-[10px] border-r-transparent border-b-[17px] border-b-neon-orange/45 drift-slow" data-parallax="0.4" data-parallax-x="-0.3"></div>
    <!-- Golden triangles -->
    <div class="absolute top-[12%] right-[25%] w-0 h-0 border-l-[16px] border-l-transparent border-r-[16px] border-r-transparent border-b-[28px] border-b-[#F4CC4A]/50 drift-2" data-parallax="0.9" data-parallax-x="0.2"></div>
    <div class="absolute bottom-[12%] left-[40%] w-0 h-0 border-l-[14px] border-l-transparent border-r-[14px] border-r-transparent border-b-[24px] border-b-[#F4CC4A]/40 drift-slow" data-parallax="0.5" data-parallax-dir="down"></div>
    <!-- NEW: Additional triangles -->
    <div class="absolute top-[55%] left-[8%] w-0 h-0 border-l-[13px] border-l-transparent border-r-[13px] border-r-transparent border-b-[22px] border-b-neon-cyan/45 drift-3" data-parallax="0.7" data-parallax-x="0.4"></div>
    <div class="absolute top-[70%] right-[8%] w-0 h-0 border-l-[11px] border-l-transparent border-r-[11px] border-r-transparent border-b-[19px] border-b-neon-pink/35 drift-1" data-parallax="0.6"></div>
    <div class="absolute top-[18%] left-[45%] w-0 h-0 border-l-[17px] border-l-transparent border-r-[17px] border-r-transparent border-b-[29px] border-b-neon-purple/45 drift-diagonal" data-parallax="0.8" data-parallax-x="-0.3"></div>
    <div class="absolute bottom-[35%] right-[28%] w-0 h-0 border-l-[9px] border-l-transparent border-r-[9px] border-r-transparent border-b-[15px] border-b-neon-orange/40 drift-2" data-parallax="0.5" data-parallax-dir="down"></div>

    <!-- Squares/Diamonds with parallax -->
    <div class="absolute top-[8%] right-[15%] w-8 h-8 border-2 border-neon-pink/50 rotate-45 drift-2" data-parallax="0.6" data-parallax-x="-0.2"></div>
    <div class="absolute bottom-[3%] left-[55%] w-6 h-6 border-2 border-neon-yellow/40 rotate-45 drift-1" data-parallax="0.7" data-parallax-dir="down"></div>
    <div class="absolute bottom-[25%] right-[5%] w-10 h-10 border-2 border-neon-cyan/40 rotate-45 drift-diagonal" data-parallax="0.5" data-parallax-x="-0.4"></div>
    <div class="absolute top-[40%] right-[20%] w-5 h-5 bg-neon-orange/30 rotate-45 drift-3" data-parallax="0.8" data-parallax-x="0.2"></div>
    <div class="absolute bottom-[8%] right-[50%] w-7 h-7 border-2 border-neon-green/35 rotate-45 drift-slow" data-parallax="0.4" data-parallax-dir="down"></div>
    <div class="absolute bottom-[35%] left-[18%] w-4 h-4 bg-neon-purple/40 rotate-45 drift-2" data-parallax="0.6" data-parallax-x="0.3"></div>
    <!-- Golden diamonds -->
    <div class="absolute top-[5%] left-[40%] w-7 h-7 border-2 border-[#F4CC4A]/50 rotate-45 drift-1" data-parallax="0.9" data-parallax-x="0.2"></div>
    <div class="absolute bottom-[15%] left-[28%] w-5 h-5 bg-[#F4CC4A]/35 rotate-45 drift-diagonal" data-parallax="0.5" data-parallax-dir="down"></div>
    <!-- NEW: Additional diamonds -->
    <div class="absolute top-[62%] right-[38%] w-6 h-6 border-2 border-neon-cyan/45 rotate-45 drift-3" data-parallax="0.7" data-parallax-x="-0.3"></div>
    <div class="absolute top-[32%] left-[3%] w-8 h-8 border-2 border-neon-pink/40 rotate-45 drift-slow" data-parallax="0.6" data-parallax-x="0.4"></div>
    <div class="absolute bottom-[50%] right-[12%] w-5 h-5 bg-neon-green/35 rotate-45 drift-1" data-parallax="0.8"></div>
    <div class="absolute top-[88%] left-[65%] w-4 h-4 border-2 border-neon-yellow/45 rotate-45 drift-2" data-parallax="0.4" data-parallax-dir="down"></div>

    <!-- Circles/Rings with parallax -->
    <div class="absolute top-[20%] right-[35%] w-12 h-12 border-2 border-neon-pink/40 rounded-full drift-slow spin-slow" data-parallax="0.5" data-parallax-x="-0.2"></div>
    <div class="absolute bottom-[5%] right-[20%] w-8 h-8 border-2 border-neon-cyan/50 rounded-full drift-1" data-parallax="0.7" data-parallax-dir="down"></div>
    <div class="absolute bottom-[40%] left-[25%] w-10 h-10 border-2 border-neon-yellow/35 rounded-full drift-2 spin-slow" data-parallax="0.6" data-parallax-x="0.3"></div>
    <div class="absolute top-[3%] right-[35%] w-6 h-6 bg-neon-green/30 rounded-full drift-diagonal" data-parallax="0.8" data-parallax-x="-0.3"></div>
    <div class="absolute bottom-[3%] left-[15%] w-14 h-14 border-2 border-neon-purple/30 rounded-full drift-3 spin-slow" data-parallax="0.4" data-parallax-dir="down"></div>
    <div class="absolute bottom-[30%] right-[3%] w-5 h-5 bg-neon-orange/35 rounded-full drift-slow" data-parallax="0.9" data-parallax-x="-0.4"></div>
    <!-- Golden circles -->
    <div class="absolute bottom-[45%] right-[40%] w-9 h-9 border-2 border-[#F4CC4A]/45 rounded-full drift-3 spin-slow" data-parallax="0.5" data-parallax-x="0.2"></div>
    <div class="absolute top-[8%] left-[30%] w-6 h-6 bg-[#F4CC4A]/30 rounded-full drift-2" data-parallax="0.7" data-parallax-x="-0.2"></div>
    <!-- NEW: Additional circles -->
    <div class="absolute top-[45%] left-[12%] w-7 h-7 border-2 border-neon-cyan/40 rounded-full drift-1 spin-slow" data-parallax="0.6" data-parallax-x="0.4"></div>
    <div class="absolute top-[75%] right-[25%] w-11 h-11 border-2 border-neon-pink/35 rounded-full drift-diagonal" data-parallax="0.8" data-parallax-dir="down"></div>
    <div class="absolute bottom-[65%] left-[48%] w-5 h-5 bg-neon-purple/40 rounded-full drift-3" data-parallax="0.4" data-parallax-x="-0.3"></div>
    <div class="absolute top-[58%] right-[3%] w-8 h-8 border-2 border-neon-green/40 rounded-full drift-slow spin-slow" data-parallax="0.7"></div>

    <!-- Zigzag SVG lines with parallax -->
    <svg class="absolute top-[22%] left-[2%] w-20 h-10 text-neon-orange/40 drift-slow" data-parallax="0.5" data-parallax-x="0.4" viewBox="0 0 80 40">
      <path d="M0 20 L20 0 L40 20 L60 0 L80 20" fill="none" stroke="currentColor" stroke-width="2"/>
    </svg>
    <svg class="absolute bottom-[30%] right-[3%] w-16 h-8 text-neon-pink/35 drift-2" data-parallax="0.6" data-parallax-x="-0.3" viewBox="0 0 64 32">
      <path d="M0 16 L16 0 L32 16 L48 0 L64 16" fill="none" stroke="currentColor" stroke-width="2"/>
    </svg>
    <svg class="absolute top-[60%] left-[35%] w-12 h-6 text-neon-cyan/30 drift-diagonal" data-parallax="0.7" viewBox="0 0 48 24">
      <path d="M0 12 L12 0 L24 12 L36 0 L48 12" fill="none" stroke="currentColor" stroke-width="2"/>
    </svg>
    <!-- NEW: Additional zigzags -->
    <svg class="absolute top-[85%] right-[45%] w-14 h-7 text-neon-purple/35 drift-1" data-parallax="0.8" data-parallax-dir="down" viewBox="0 0 56 28">
      <path d="M0 14 L14 0 L28 14 L42 0 L56 14" fill="none" stroke="currentColor" stroke-width="2"/>
    </svg>
    <svg class="absolute top-[10%] left-[55%] w-18 h-9 text-neon-green/40 drift-3" data-parallax="0.5" data-parallax-x="0.3" viewBox="0 0 72 36">
      <path d="M0 18 L18 0 L36 18 L54 0 L72 18" fill="none" stroke="currentColor" stroke-width="2"/>
    </svg>

    <!-- Squiggly/wavy lines with parallax -->
    <svg class="absolute top-[35%] right-[15%] w-24 h-8 text-neon-purple/35 drift-1 wobble" data-parallax="0.6" data-parallax-x="-0.2" viewBox="0 0 96 32">
      <path d="M0 16 Q12 0 24 16 T48 16 T72 16 T96 16" fill="none" stroke="currentColor" stroke-width="2"/>
    </svg>
    <svg class="absolute bottom-[55%] left-[10%] w-20 h-6 text-neon-yellow/30 drift-3 wobble" data-parallax="0.7" data-parallax-x="0.3" viewBox="0 0 80 24">
      <path d="M0 12 Q10 0 20 12 T40 12 T60 12 T80 12" fill="none" stroke="currentColor" stroke-width="2"/>
    </svg>
    <svg class="absolute top-[80%] left-[45%] w-16 h-5 text-neon-green/35 drift-slow wobble" data-parallax="0.5" data-parallax-dir="down" viewBox="0 0 64 20">
      <path d="M0 10 Q8 0 16 10 T32 10 T48 10 T64 10" fill="none" stroke="currentColor" stroke-width="2"/>
    </svg>

    <!-- Long center squiggly lines - neon bright, varied positions with parallax -->
    <svg class="absolute top-[15%] right-[10%] w-60 h-12 text-neon-orange/50 drift-2 wobble" data-parallax="0.4" data-parallax-x="-0.3" viewBox="0 0 240 48">
      <path d="M0 24 Q20 0 40 24 T80 24 T120 24 T160 24 T200 24 T240 24" fill="none" stroke="currentColor" stroke-width="2"/>
    </svg>
    <svg class="absolute top-[48%] left-[5%] w-44 h-8 text-neon-green/50 drift-slow wobble" data-parallax="0.6" data-parallax-x="0.4" viewBox="0 0 176 32">
      <path d="M0 16 Q14 0 28 16 T56 16 T84 16 T112 16 T140 16 T176 16" fill="none" stroke="currentColor" stroke-width="2"/>
    </svg>
    <svg class="absolute top-[78%] left-[35%] w-52 h-10 text-neon-yellow/50 drift-diagonal wobble" data-parallax="0.7" data-parallax-dir="down" viewBox="0 0 208 40">
      <path d="M0 20 Q17 0 34 20 T68 20 T102 20 T136 20 T170 20 T208 20" fill="none" stroke="currentColor" stroke-width="2"/>
    </svg>

    <!-- Plus signs with parallax -->
    <div class="absolute top-[28%] right-[45%] text-neon-pink/40 text-2xl font-light drift-2" data-parallax="0.8" data-parallax-x="-0.2">+</div>
    <div class="absolute bottom-[40%] left-[40%] text-neon-cyan/35 text-xl font-light drift-1" data-parallax="0.5" data-parallax-x="0.3">+</div>
    <div class="absolute top-[72%] left-[12%] text-neon-yellow/30 text-3xl font-light drift-diagonal" data-parallax="0.6" data-parallax-dir="down">+</div>
    <!-- NEW: Additional plus signs -->
    <div class="absolute top-[5%] left-[52%] text-neon-purple/35 text-xl font-light drift-3" data-parallax="0.7" data-parallax-x="0.2">+</div>
    <div class="absolute bottom-[18%] right-[38%] text-neon-green/40 text-2xl font-light drift-slow" data-parallax="0.4">+</div>

    <!-- Dots cluster with parallax -->
    <div class="absolute top-[12%] right-[35%] flex gap-2 drift-slow" data-parallax="0.6" data-parallax-x="-0.3">
      <div class="w-2 h-2 bg-neon-pink/50 rounded-full"></div>
      <div class="w-2 h-2 bg-neon-yellow/50 rounded-full"></div>
      <div class="w-2 h-2 bg-neon-cyan/50 rounded-full"></div>
    </div>
    <div class="absolute bottom-[28%] left-[5%] flex gap-1.5 drift-2" data-parallax="0.7" data-parallax-x="0.4">
      <div class="w-1.5 h-1.5 bg-neon-purple/45 rounded-full"></div>
      <div class="w-1.5 h-1.5 bg-neon-green/45 rounded-full"></div>
      <div class="w-1.5 h-1.5 bg-neon-orange/45 rounded-full"></div>
    </div>
    <!-- NEW: Additional dot clusters -->
    <div class="absolute top-[65%] right-[15%] flex gap-2 drift-1" data-parallax="0.5" data-parallax-dir="down">
      <div class="w-2 h-2 bg-neon-cyan/45 rounded-full"></div>
      <div class="w-2 h-2 bg-neon-purple/45 rounded-full"></div>
    </div>
    <div class="absolute bottom-[60%] right-[50%] flex gap-1.5 drift-diagonal" data-parallax="0.8" data-parallax-x="-0.2">
      <div class="w-1.5 h-1.5 bg-neon-yellow/40 rounded-full"></div>
      <div class="w-1.5 h-1.5 bg-neon-pink/40 rounded-full"></div>
      <div class="w-1.5 h-1.5 bg-neon-green/40 rounded-full"></div>
    </div>

    <!-- Lightning bolt shapes with parallax -->
    <svg class="absolute top-[42%] left-[3%] w-6 h-12 text-neon-yellow/40 drift-1" data-parallax="0.6" data-parallax-x="0.3" viewBox="0 0 24 48">
      <path d="M12 0 L4 20 L10 20 L6 48 L20 18 L12 18 Z" fill="currentColor"/>
    </svg>
    <svg class="absolute bottom-[15%] right-[18%] w-5 h-10 text-neon-cyan/35 drift-3" data-parallax="0.7" data-parallax-dir="down" viewBox="0 0 20 40">
      <path d="M10 0 L3 16 L8 16 L5 40 L17 15 L10 15 Z" fill="currentColor"/>
    </svg>
    <!-- NEW: Additional lightning bolts -->
    <svg class="absolute top-[18%] left-[68%] w-5 h-10 text-neon-pink/40 drift-2" data-parallax="0.8" data-parallax-x="-0.3" viewBox="0 0 20 40">
      <path d="M10 0 L3 16 L8 16 L5 40 L17 15 L10 15 Z" fill="currentColor"/>
    </svg>
    <svg class="absolute bottom-[48%] right-[8%] w-4 h-8 text-neon-green/35 drift-slow" data-parallax="0.5" viewBox="0 0 16 32">
      <path d="M8 0 L2 13 L6 13 L4 32 L14 12 L8 12 Z" fill="currentColor"/>
    </svg>

    <!-- Small stars with parallax -->
    <div class="absolute top-[8%] right-[25%] text-neon-yellow/50 text-sm drift-slow" data-parallax="0.7" data-parallax-x="-0.2">✦</div>
    <div class="absolute top-[85%] left-[22%] text-neon-pink/40 text-xs drift-2" data-parallax="0.5" data-parallax-dir="down">✦</div>
    <div class="absolute top-[38%] right-[3%] text-neon-cyan/45 text-base drift-diagonal" data-parallax="0.8" data-parallax-x="-0.4">✦</div>
    <!-- NEW: Additional stars -->
    <div class="absolute top-[52%] left-[58%] text-neon-purple/45 text-sm drift-1" data-parallax="0.6" data-parallax-x="0.3">✦</div>
    <div class="absolute bottom-[22%] right-[55%] text-neon-green/40 text-base drift-3" data-parallax="0.4">✦</div>
    <div class="absolute top-[92%] right-[15%] text-neon-orange/45 text-xs drift-slow" data-parallax="0.9" data-parallax-dir="down">✦</div>
  </div>

  <!-- Gradient Overlays + Backdrop Blur for dreamy effect -->
  <div
    class="absolute inset-0 bg-gradient-to-b from-night-900/50 via-transparent to-night-900 backdrop-blur-sm -z-10"
    aria-hidden="true"
  >
  </div>

  <!-- Content Container (centered) -->
  <div class="relative z-10 max-w-4xl mx-auto px-4 text-center pt-20">
    <!-- Mascot: Absolute positioned, behind content on mobile, to the left on desktop -->
    <img
      src="/img/leo-mascot.avif"
      alt="Hyper-realistic Portrait of Leo Ashcraft"
      class="hero-mascot absolute top-[44%] md:top-[37%] lg:top-[45%] xl:top-[55%] left-1/2 md:left-[16%] lg:left-[9%] xl:left-[-1%] -translate-x-1/2 -translate-y-1/2 w-[280px] md:w-[230px] lg:w-[220px] xl:w-[300px] h-auto pointer-events-none -z-10 md:z-[5]"
      aria-hidden="true"
    />
    <div class="rounded-2xl p-8 md:p-12 mt-36 md:mt-0 bg-black/70 md:bg-transparent shadow-[0_0_60px_40px_rgba(0,0,0,0.7)] md:shadow-none">
    <!-- Greeting (visible immediately on mobile, fade-in on desktop) -->
    <p
      class="text-neon-pink font-mono text-sm md:text-base mb-4 md:opacity-0 md:animate-[fadeInUp_0.6s_ease_0.2s_forwards] glow-text-pink"
    >
      Hello, I'm
    </p>

    <!-- Name (LCP element - visible immediately on mobile) -->
    <h1
      class="hero-title text-4xl sm:text-5xl md:text-5xl lg:text-7xl font-bold mb-4 md:opacity-0 md:animate-[fadeInUp_0.6s_ease_0.4s_forwards]"
    >
      <span class="gradient-text-animated">{profile.name}</span><span class="sr-only"> - Full Stack Software Developer</span>
    </h1>

    <!-- Title with Typewriter Effect -->
    <h2
      class="text-xl sm:text-2xl md:text-2xl lg:text-3xl text-gray-300 mb-6 md:opacity-0 md:animate-[fadeInUp_0.6s_ease_0.6s_forwards] h-[1.75rem] sm:h-[2rem] md:h-[2rem] lg:h-[2.25rem]"
    >
      <span id="typewriter" data-titles={JSON.stringify(heroTitles)}>{heroTitles[0]}</span><span id="typewriter-cursor" class="hidden inline-block w-[3px] h-[1em] bg-neon-cyan ml-1 align-middle animate-[cursor-blink_1s_step-end_infinite]"></span>
    </h2>

    <!-- Tagline with word-by-word grow animation -->
    <p
      id="hero-tagline"
      class="text-gray-400 text-lg md:text-lg lg:text-xl max-w-2xl mx-auto mb-8 md:opacity-0 md:animate-[fadeInUp_0.6s_ease_0.8s_forwards]"
    >
      {profile.tagline.split(' ').map((word, i) => (
        <span class="tagline-word inline-block transition-transform duration-200" data-word-index={i}>{word}{i < profile.tagline.split(' ').length - 1 ? '\u00A0' : ''}</span>
      ))}
    </p>

    <!-- CTA Buttons -->
    <div
      class="flex flex-col sm:flex-row items-center justify-center gap-4 md:opacity-0 md:animate-[fadeInUp_0.6s_ease_1s_forwards]"
    >
      <a href="#projects" class="btn btn-primary md:text-sm lg:text-base">
        View My Work
        <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M19 9l-7 7-7-7"></path>
        </svg>
      </a>

      <a href="#contact" id="contact-btn" class="btn btn-secondary md:text-sm lg:text-base">
        Get In Touch
        <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"
          ></path>
        </svg>
      </a>
    </div>

    <!-- Stats (visible immediately on mobile) -->
    <div
      class="mt-16 grid grid-cols-2 md:grid-cols-4 gap-6 md:w-[120%] md:-ml-[10%] xl:w-full xl:ml-0 md:opacity-0 md:animate-[fadeInUp_0.6s_ease_1.2s_forwards]"
    >
      {
        profile.stats.map((stat) => (
          <div class="text-center">
            <div class="text-3xl md:text-3xl lg:text-4xl font-bold text-white">
              <span class="counter" data-target={stat.value}>
                0
              </span>
              {stat.suffix}
            </div>
            <div class="text-gray-400 text-sm mt-1">{stat.label}</div>
          </div>
        ))
      }
    </div>
    </div>
  </div>

  <!-- Scroll Indicator (hidden on mobile to avoid overlap with stats) -->
  <div
    class="hidden md:block absolute bottom-8 left-1/2 -translate-x-1/2 opacity-0 animate-[fadeInUp_0.6s_ease_1.4s_forwards]"
  >
    <a
      href="#about"
      class="flex flex-col items-center gap-2 text-gray-400 hover:text-neon-cyan transition-colors"
      aria-label="Scroll to about section"
    >
      <span class="text-xs font-mono">SCROLL</span>
      <div class="w-6 h-10 border-2 border-current rounded-full flex justify-center pt-2">
        <div
          class="w-1 h-2 bg-current rounded-full animate-bounce"
          aria-hidden="true"
        >
        </div>
      </div>
    </a>
  </div>
  <!-- Neon Bottom Border -->
  <div class="absolute bottom-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-neon-cyan/50 to-transparent"></div>
</section>

<script>
  // Show final counter values immediately (no animation for better performance)
  function initCounters() {
    const counters = document.querySelectorAll('.counter');
    counters.forEach((counter) => {
      const target = counter.getAttribute('data-target') || '0';
      counter.textContent = target;
    });
  }

  // Typewriter effect for title
  let typewriterTimeout: number | null = null;
  let typewriterRunning = false;

  function initTypewriter() {
    const element = document.getElementById('typewriter');
    const cursor = document.getElementById('typewriter-cursor');
    if (!element) return;

    const titlesData = element.getAttribute('data-titles');
    const titles: string[] = titlesData ? JSON.parse(titlesData) : ['Full Stack Software Developer'];

    // Check if animations are disabled
    const animationsDisabled = document.documentElement.getAttribute('data-animations') === 'disabled';
    if (animationsDisabled) {
      // Stop any running typewriter
      if (typewriterTimeout) {
        clearTimeout(typewriterTimeout);
        typewriterTimeout = null;
      }
      typewriterRunning = false;
      // Just show the first title, no animation
      element.textContent = titles[0];
      if (cursor) {
        cursor.classList.add('hidden');
      }
      return;
    }

    // If already running, don't restart
    if (typewriterRunning) return;
    typewriterRunning = true;

    // Start with first title complete, ready to delete
    let titleIndex = 0;
    let charIndex = titles[0].length;
    let isDeleting = true;
    let isPaused = false;

    const deleteSpeed = 50;
    const pauseTime = 2000;

    function getRandomTypeDelay(char: string): number {
      const baseSpeed = 50;
      const variance = 80;
      let delay = baseSpeed + Math.random() * variance;

      // Longer pause after spaces
      if (char === ' ') {
        delay += Math.random() * 350;
      }

      // Occasional hesitation
      if (Math.random() < 0.1) {
        delay += Math.random() * 200;
      }

      return delay;
    }

    function type() {
      // Stop if animations were disabled
      if (document.documentElement.getAttribute('data-animations') === 'disabled') {
        element.textContent = titles[0];
        typewriterRunning = false;
        return;
      }

      const currentTitle = titles[titleIndex];

      if (isPaused) {
        isPaused = false;
        isDeleting = true;
        typewriterTimeout = window.setTimeout(type, pauseTime);
        return;
      }

      if (isDeleting) {
        element.textContent = currentTitle.substring(0, charIndex - 1);
        charIndex--;

        if (charIndex === 0) {
          isDeleting = false;
          titleIndex = (titleIndex + 1) % titles.length;
          typewriterTimeout = window.setTimeout(type, 500);
          return;
        }
      } else {
        const currentChar = currentTitle[charIndex] || '';
        element.textContent = currentTitle.substring(0, charIndex + 1);
        charIndex++;

        if (charIndex === currentTitle.length) {
          isPaused = true;
          typewriterTimeout = window.setTimeout(type, 100);
          return;
        }
        typewriterTimeout = window.setTimeout(type, getRandomTypeDelay(currentChar));
        return;
      }

      typewriterTimeout = window.setTimeout(type, deleteSpeed);
    }

    // Show cursor immediately, wait 4 seconds before erasing
    if (cursor) {
      cursor.classList.remove('hidden');
    }
    typewriterTimeout = window.setTimeout(type, 4000);
  }

  // Listen for animations toggle
  window.addEventListener('animations-change', (e: Event) => {
    const customEvent = e as CustomEvent<{ enabled: boolean }>;
    if (customEvent.detail.enabled) {
      // Re-enable animations - restart typewriter
      typewriterRunning = false;
      initTypewriter();
    } else {
      // Disable animations - stop typewriter and show static text
      initTypewriter();
    }
  });

  // Explicit scroll handler for contact button
  function initContactButton() {
    const contactBtn = document.getElementById('contact-btn');
    if (contactBtn) {
      contactBtn.addEventListener('click', (e) => {
        e.preventDefault();
        const contactSection = document.getElementById('contact');
        if (contactSection) {
          contactSection.scrollIntoView({ behavior: 'smooth' });
        }
      });
    }
  }

  // Tagline word grow animation
  function animateTaglineWords(startDelay: number = 1400) {
    // Skip if animations disabled
    if (document.documentElement.getAttribute('data-animations') === 'disabled') return;

    const words = document.querySelectorAll('.tagline-word') as NodeListOf<HTMLElement>;
    if (words.length === 0) return;

    const wordDelay = 150; // Delay between each word

    // Reset all words first
    words.forEach((word) => {
      word.style.transform = 'scale(1)';
    });

    // Animate each word sequentially
    words.forEach((word, index) => {
      setTimeout(() => {
        // Grow to 103%
        word.style.transform = 'scale(1.03)';
        // Shrink back after 200ms
        setTimeout(() => {
          word.style.transform = 'scale(1)';
        }, 200);
      }, startDelay + (index * wordDelay));
    });
  }

  // Initial page load animation (wait for fadeInUp to complete)
  function initTaglineWordGrow() {
    animateTaglineWords(1400);
  }

  // Listen for home navigation clicks to retrigger animation
  function initHomeNavListener() {
    // Match home links: "#", "#home", or "/"
    document.querySelectorAll('a[href="#"], a[href="#home"], a[href="/"]').forEach((link) => {
      link.addEventListener('click', () => {
        // Short delay for click retrigger (no need to wait for fadeInUp)
        setTimeout(() => animateTaglineWords(300), 100);
      });
    });

    // Listen for back-to-top button reset event
    window.addEventListener('reset-hero-tagline', () => {
      setTimeout(() => animateTaglineWords(300), 800);
    });
  }

  // Parallax effect for hero background
  function initParallax() {
    const parallaxBg = document.getElementById('hero-parallax-bg');
    const heroSection = document.getElementById('home');
    if (!parallaxBg || !heroSection) return;

    // Check for reduced motion preference or animations disabled
    const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
    const animationsDisabled = document.documentElement.getAttribute('data-animations') === 'disabled';
    if (prefersReducedMotion || animationsDisabled) return;

    let ticking = false;

    function updateParallax() {
      const scrollY = window.scrollY;
      const heroHeight = heroSection.offsetHeight;

      // Only apply parallax while in or near the hero section
      if (scrollY <= heroHeight * 1.5) {
        const parallaxSpeed = 0.6; // Higher = more pronounced movement
        const yOffset = scrollY * parallaxSpeed;
        parallaxBg.style.transform = `translateY(${yOffset}px)`;
      }
      ticking = false;
    }

    window.addEventListener('scroll', () => {
      if (!ticking) {
        requestAnimationFrame(updateParallax);
        ticking = true;
      }
    }, { passive: true });
  }

  initCounters();
  initTypewriter();
  initContactButton();
  initTaglineWordGrow();
  initHomeNavListener();
  initParallax();
  initShapeParallax();
  document.addEventListener('astro:after-swap', () => {
    initCounters();
    initTypewriter();
    initContactButton();
    initTaglineWordGrow();
    initHomeNavListener();
    initParallax();
    initShapeParallax();
  });

  // Parallax for hero floating shapes
  function initShapeParallax() {
    const section = document.getElementById('home');
    if (!section) return;

    // Check for reduced motion preference or animations disabled
    const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
    const animationsDisabled = document.documentElement.getAttribute('data-animations') === 'disabled';
    if (prefersReducedMotion || animationsDisabled) return;

    const parallaxElements = section.querySelectorAll('[data-parallax]') as NodeListOf<HTMLElement>;
    if (parallaxElements.length === 0) return;

    let ticking = false;

    function updateParallax() {
      const scrollY = window.scrollY;
      const sectionHeight = section!.offsetHeight;

      if (scrollY <= sectionHeight * 1.5) {
        parallaxElements.forEach((el) => {
          const speed = parseFloat(el.dataset.parallax || '0.5');
          const direction = el.dataset.parallaxDir === 'down' ? 1 : -1;
          const yOffset = scrollY * speed * 0.5 * direction;
          const xOffset = parseFloat(el.dataset.parallaxX || '0') * scrollY * 0.3;

          el.style.marginTop = `${yOffset}px`;
          el.style.marginLeft = `${xOffset}px`;
        });
      }
      ticking = false;
    }

    window.addEventListener('scroll', () => {
      if (!ticking) {
        requestAnimationFrame(updateParallax);
        ticking = true;
      }
    }, { passive: true });
  }
</script>
