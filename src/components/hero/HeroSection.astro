---
import { profile } from '../../data/profile';
import { heroTitles } from '../../data/hero';
---

<section
  id="home"
  class="relative min-h-screen flex items-center justify-center overflow-hidden"
  aria-label="Introduction"
>
  <!-- Base gradient background -->
  <div class="absolute inset-0 -z-20 bg-gradient-to-b from-[#0a0015] via-[#1a0a2a] to-[#0a0015]" aria-hidden="true"></div>

  <!-- Glowing orbs layer -->
  <div class="absolute inset-0 -z-10 overflow-hidden" aria-hidden="true">
    <div class="absolute top-[10%] left-[10%] w-72 h-72 bg-fuchsia-600/25 rounded-full blur-3xl animate-pulse-slow"></div>
    <div class="absolute top-[60%] right-[5%] w-96 h-96 bg-purple-500/20 rounded-full blur-3xl"></div>
    <div class="absolute top-[30%] right-[30%] w-64 h-64 bg-yellow-400/15 rounded-full blur-3xl animate-pulse-slow"></div>
    <div class="absolute bottom-[20%] left-[20%] w-80 h-80 bg-neon-pink/15 rounded-3xl blur-3xl"></div>
    <div class="absolute top-[50%] left-[50%] w-48 h-48 bg-green-400/20 rounded-full blur-2xl animate-pulse-slow"></div>
    <div class="absolute bottom-[40%] right-[15%] w-56 h-56 bg-orange-400/15 rounded-full blur-3xl"></div>
  </div>

  <!-- Floating geometric shapes - 80s arcade carpet style -->
  <div class="absolute inset-0 -z-10 overflow-hidden pointer-events-none" aria-hidden="true">
    <!-- Triangles -->
    <div class="absolute top-[15%] left-[8%] w-0 h-0 border-l-[20px] border-l-transparent border-r-[20px] border-r-transparent border-b-[35px] border-b-neon-pink/50 drift-1"></div>
    <div class="absolute top-[70%] right-[12%] w-0 h-0 border-l-[15px] border-l-transparent border-r-[15px] border-r-transparent border-b-[26px] border-b-neon-yellow/40 drift-2"></div>
    <div class="absolute top-[45%] left-[5%] w-0 h-0 border-l-[12px] border-l-transparent border-r-[12px] border-r-transparent border-b-[20px] border-b-neon-purple/40 drift-diagonal"></div>
    <div class="absolute bottom-[25%] right-[25%] w-0 h-0 border-l-[18px] border-l-transparent border-r-[18px] border-r-transparent border-b-[30px] border-b-neon-green/35 drift-3"></div>
    <div class="absolute top-[25%] right-[8%] w-0 h-0 border-l-[10px] border-l-transparent border-r-[10px] border-r-transparent border-b-[17px] border-b-neon-orange/45 drift-slow"></div>

    <!-- Squares/Diamonds -->
    <div class="absolute top-[20%] right-[20%] w-8 h-8 border-2 border-neon-pink/50 rotate-45 drift-2"></div>
    <div class="absolute top-[65%] left-[15%] w-6 h-6 border-2 border-neon-yellow/40 rotate-45 drift-1"></div>
    <div class="absolute bottom-[35%] right-[8%] w-10 h-10 border-2 border-neon-cyan/40 rotate-45 drift-diagonal"></div>
    <div class="absolute top-[40%] right-[35%] w-5 h-5 bg-neon-orange/30 rotate-45 drift-3"></div>
    <div class="absolute bottom-[15%] left-[30%] w-7 h-7 border-2 border-neon-green/35 rotate-45 drift-slow"></div>
    <div class="absolute top-[55%] left-[25%] w-4 h-4 bg-neon-purple/40 rotate-45 drift-2"></div>

    <!-- Circles/Rings -->
    <div class="absolute top-[30%] left-[20%] w-12 h-12 border-2 border-neon-pink/40 rounded-full drift-slow spin-slow"></div>
    <div class="absolute top-[75%] right-[30%] w-8 h-8 border-2 border-neon-cyan/50 rounded-full drift-1"></div>
    <div class="absolute bottom-[45%] left-[8%] w-10 h-10 border-2 border-neon-yellow/35 rounded-full drift-2 spin-slow"></div>
    <div class="absolute top-[18%] left-[40%] w-6 h-6 bg-neon-green/30 rounded-full drift-diagonal"></div>
    <div class="absolute bottom-[20%] right-[40%] w-14 h-14 border-2 border-neon-purple/30 rounded-full drift-3 spin-slow"></div>
    <div class="absolute top-[50%] right-[5%] w-5 h-5 bg-neon-orange/35 rounded-full drift-slow"></div>

    <!-- Zigzag SVG lines -->
    <svg class="absolute top-[22%] left-[2%] w-20 h-10 text-neon-orange/40 drift-slow" viewBox="0 0 80 40">
      <path d="M0 20 L20 0 L40 20 L60 0 L80 20" fill="none" stroke="currentColor" stroke-width="2"/>
    </svg>
    <svg class="absolute bottom-[30%] right-[3%] w-16 h-8 text-neon-pink/35 drift-2" viewBox="0 0 64 32">
      <path d="M0 16 L16 0 L32 16 L48 0 L64 16" fill="none" stroke="currentColor" stroke-width="2"/>
    </svg>
    <svg class="absolute top-[60%] left-[35%] w-12 h-6 text-neon-cyan/30 drift-diagonal" viewBox="0 0 48 24">
      <path d="M0 12 L12 0 L24 12 L36 0 L48 12" fill="none" stroke="currentColor" stroke-width="2"/>
    </svg>

    <!-- Squiggly/wavy lines -->
    <svg class="absolute top-[35%] right-[15%] w-24 h-8 text-neon-purple/35 drift-1 wobble" viewBox="0 0 96 32">
      <path d="M0 16 Q12 0 24 16 T48 16 T72 16 T96 16" fill="none" stroke="currentColor" stroke-width="2"/>
    </svg>
    <svg class="absolute bottom-[55%] left-[10%] w-20 h-6 text-neon-yellow/30 drift-3 wobble" viewBox="0 0 80 24">
      <path d="M0 12 Q10 0 20 12 T40 12 T60 12 T80 12" fill="none" stroke="currentColor" stroke-width="2"/>
    </svg>
    <svg class="absolute top-[80%] left-[45%] w-16 h-5 text-neon-green/35 drift-slow wobble" viewBox="0 0 64 20">
      <path d="M0 10 Q8 0 16 10 T32 10 T48 10 T64 10" fill="none" stroke="currentColor" stroke-width="2"/>
    </svg>

    <!-- Long center squiggly lines - neon bright, varied positions -->
    <svg class="absolute top-[15%] right-[10%] w-60 h-12 text-neon-orange/50 drift-2 wobble" viewBox="0 0 240 48">
      <path d="M0 24 Q20 0 40 24 T80 24 T120 24 T160 24 T200 24 T240 24" fill="none" stroke="currentColor" stroke-width="2"/>
    </svg>
    <svg class="absolute top-[48%] left-[5%] w-44 h-8 text-neon-green/50 drift-slow wobble" viewBox="0 0 176 32">
      <path d="M0 16 Q14 0 28 16 T56 16 T84 16 T112 16 T140 16 T176 16" fill="none" stroke="currentColor" stroke-width="2"/>
    </svg>
    <svg class="absolute top-[78%] left-[35%] w-52 h-10 text-neon-yellow/50 drift-diagonal wobble" viewBox="0 0 208 40">
      <path d="M0 20 Q17 0 34 20 T68 20 T102 20 T136 20 T170 20 T208 20" fill="none" stroke="currentColor" stroke-width="2"/>
    </svg>

    <!-- Plus signs -->
    <div class="absolute top-[28%] right-[45%] text-neon-pink/40 text-2xl font-light drift-2">+</div>
    <div class="absolute bottom-[40%] left-[40%] text-neon-cyan/35 text-xl font-light drift-1">+</div>
    <div class="absolute top-[72%] left-[12%] text-neon-yellow/30 text-3xl font-light drift-diagonal">+</div>

    <!-- Dots cluster -->
    <div class="absolute top-[12%] right-[35%] flex gap-2 drift-slow">
      <div class="w-2 h-2 bg-neon-pink/50 rounded-full"></div>
      <div class="w-2 h-2 bg-neon-yellow/50 rounded-full"></div>
      <div class="w-2 h-2 bg-neon-cyan/50 rounded-full"></div>
    </div>
    <div class="absolute bottom-[28%] left-[5%] flex gap-1.5 drift-2">
      <div class="w-1.5 h-1.5 bg-neon-purple/45 rounded-full"></div>
      <div class="w-1.5 h-1.5 bg-neon-green/45 rounded-full"></div>
      <div class="w-1.5 h-1.5 bg-neon-orange/45 rounded-full"></div>
    </div>

    <!-- Lightning bolt shapes -->
    <svg class="absolute top-[42%] left-[3%] w-6 h-12 text-neon-yellow/40 drift-1" viewBox="0 0 24 48">
      <path d="M12 0 L4 20 L10 20 L6 48 L20 18 L12 18 Z" fill="currentColor"/>
    </svg>
    <svg class="absolute bottom-[15%] right-[18%] w-5 h-10 text-neon-cyan/35 drift-3" viewBox="0 0 20 40">
      <path d="M10 0 L3 16 L8 16 L5 40 L17 15 L10 15 Z" fill="currentColor"/>
    </svg>

    <!-- Small stars -->
    <div class="absolute top-[8%] right-[25%] text-neon-yellow/50 text-sm drift-slow">✦</div>
    <div class="absolute top-[85%] left-[22%] text-neon-pink/40 text-xs drift-2">✦</div>
    <div class="absolute top-[38%] right-[3%] text-neon-cyan/45 text-base drift-diagonal">✦</div>
  </div>

  <!-- Gradient Overlays + Backdrop Blur for dreamy effect -->
  <div
    class="absolute inset-0 bg-gradient-to-b from-night-900/50 via-transparent to-night-900 backdrop-blur-sm -z-10"
    aria-hidden="true"
  >
  </div>

  <!-- Mascot Image (behind text, off-center left) -->
  <img
    src="/img/leo-mascot.avif"
    alt=""
    class="absolute top-[38%] md:top-[53%] left-1/2 -translate-x-1/2 md:left-[7%] md:translate-x-0 lg:left-[12%] xl:left-[17%] 2xl:left-[22%] -translate-y-1/2 w-[250px] md:w-[200px] lg:w-[250px] h-auto opacity-95 pointer-events-none z-[5]"
    aria-hidden="true"
  />

  <!-- Content -->
  <div class="relative z-10 max-w-4xl mx-auto px-4 text-center pt-20">
    <div class="rounded-2xl p-8 md:p-12 mt-36 md:mt-0 bg-black/70 md:bg-transparent shadow-[0_0_60px_40px_rgba(0,0,0,0.7)] md:shadow-none">
    <!-- Greeting (visible immediately on mobile, fade-in on desktop) -->
    <p
      class="text-neon-pink font-mono text-sm md:text-base mb-4 md:opacity-0 md:animate-[fadeInUp_0.6s_ease_0.2s_forwards] glow-text-pink"
    >
      Hello, I'm
    </p>

    <!-- Name (LCP element - visible immediately on mobile) -->
    <h1
      class="hero-title text-4xl sm:text-5xl md:text-6xl lg:text-7xl font-bold mb-4 md:opacity-0 md:animate-[fadeInUp_0.6s_ease_0.4s_forwards]"
    >
      <span class="gradient-text-animated">{profile.name}</span>
    </h1>

    <!-- Title with Typewriter Effect -->
    <h2
      class="text-xl sm:text-2xl md:text-3xl text-gray-300 mb-6 md:opacity-0 md:animate-[fadeInUp_0.6s_ease_0.6s_forwards] h-[1.75rem] sm:h-[2rem] md:h-[2.25rem]"
    >
      <span id="typewriter" data-titles={JSON.stringify(heroTitles)}>{heroTitles[0]}</span><span id="typewriter-cursor" class="hidden inline-block w-[3px] h-[1em] bg-neon-cyan ml-1 align-middle animate-[cursor-blink_1s_step-end_infinite]"></span>
    </h2>

    <!-- Tagline with word-by-word grow animation -->
    <p
      id="hero-tagline"
      class="text-gray-400 text-lg md:text-xl max-w-2xl mx-auto mb-8 md:opacity-0 md:animate-[fadeInUp_0.6s_ease_0.8s_forwards]"
    >
      {profile.tagline.split(' ').map((word, i) => (
        <span class="tagline-word inline-block transition-transform duration-200" data-word-index={i}>{word}{i < profile.tagline.split(' ').length - 1 ? '\u00A0' : ''}</span>
      ))}
    </p>

    <!-- CTA Buttons -->
    <div
      class="flex flex-col sm:flex-row items-center justify-center gap-4 md:opacity-0 md:animate-[fadeInUp_0.6s_ease_1s_forwards]"
    >
      <a href="#projects" class="btn btn-primary">
        View My Work
        <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M19 9l-7 7-7-7"></path>
        </svg>
      </a>

      <a href="#contact" id="contact-btn" class="btn btn-secondary">
        Get In Touch
        <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"
          ></path>
        </svg>
      </a>
    </div>

    <!-- Stats (visible immediately on mobile) -->
    <div
      class="mt-16 grid grid-cols-2 md:grid-cols-4 gap-6 md:opacity-0 md:animate-[fadeInUp_0.6s_ease_1.2s_forwards]"
    >
      {
        profile.stats.map((stat) => (
          <div class="text-center">
            <div class="text-3xl md:text-4xl font-bold text-white">
              <span class="counter" data-target={stat.value}>
                0
              </span>
              {stat.suffix}
            </div>
            <div class="text-gray-400 text-sm mt-1">{stat.label}</div>
          </div>
        ))
      }
    </div>
    </div>
  </div>

  <!-- Scroll Indicator (hidden on mobile to avoid overlap with stats) -->
  <div
    class="hidden md:block absolute bottom-8 left-1/2 -translate-x-1/2 opacity-0 animate-[fadeInUp_0.6s_ease_1.4s_forwards]"
  >
    <a
      href="#about"
      class="flex flex-col items-center gap-2 text-gray-400 hover:text-neon-cyan transition-colors"
      aria-label="Scroll to about section"
    >
      <span class="text-xs font-mono">SCROLL</span>
      <div class="w-6 h-10 border-2 border-current rounded-full flex justify-center pt-2">
        <div
          class="w-1 h-2 bg-current rounded-full animate-bounce"
          aria-hidden="true"
        >
        </div>
      </div>
    </a>
  </div>
  <!-- Neon Bottom Border -->
  <div class="absolute bottom-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-neon-cyan/50 to-transparent"></div>
</section>

<script>
  // Show final counter values immediately (no animation for better performance)
  function initCounters() {
    const counters = document.querySelectorAll('.counter');
    counters.forEach((counter) => {
      const target = counter.getAttribute('data-target') || '0';
      counter.textContent = target;
    });
  }

  // Typewriter effect for title
  function initTypewriter() {
    const element = document.getElementById('typewriter');
    const cursor = document.getElementById('typewriter-cursor');
    if (!element) return;

    const titlesData = element.getAttribute('data-titles');
    const titles: string[] = titlesData ? JSON.parse(titlesData) : ['Full Stack Software Developer'];

    // Start with first title complete, ready to delete
    let titleIndex = 0;
    let charIndex = titles[0].length;
    let isDeleting = true;
    let isPaused = false;

    const typeSpeed = 80;
    const deleteSpeed = 50;
    const pauseTime = 2000;

    function type() {
      const currentTitle = titles[titleIndex];

      if (isPaused) {
        isPaused = false;
        isDeleting = true;
        setTimeout(type, pauseTime);
        return;
      }

      if (isDeleting) {
        element.textContent = currentTitle.substring(0, charIndex - 1);
        charIndex--;

        if (charIndex === 0) {
          isDeleting = false;
          titleIndex = (titleIndex + 1) % titles.length;
          setTimeout(type, 500);
          return;
        }
      } else {
        element.textContent = currentTitle.substring(0, charIndex + 1);
        charIndex++;

        if (charIndex === currentTitle.length) {
          isPaused = true;
          setTimeout(type, 100);
          return;
        }
      }

      setTimeout(type, isDeleting ? deleteSpeed : typeSpeed);
    }

    // Show cursor immediately, wait 4 seconds before erasing
    if (cursor) {
      cursor.classList.remove('hidden');
    }
    setTimeout(type, 4000);
  }

  // Explicit scroll handler for contact button
  function initContactButton() {
    const contactBtn = document.getElementById('contact-btn');
    if (contactBtn) {
      contactBtn.addEventListener('click', (e) => {
        e.preventDefault();
        const contactSection = document.getElementById('contact');
        if (contactSection) {
          contactSection.scrollIntoView({ behavior: 'smooth' });
        }
      });
    }
  }

  // Tagline word grow animation
  function animateTaglineWords(startDelay: number = 1400) {
    const words = document.querySelectorAll('.tagline-word') as NodeListOf<HTMLElement>;
    if (words.length === 0) return;

    const wordDelay = 150; // Delay between each word

    // Reset all words first
    words.forEach((word) => {
      word.style.transform = 'scale(1)';
    });

    // Animate each word sequentially
    words.forEach((word, index) => {
      setTimeout(() => {
        // Grow to 103%
        word.style.transform = 'scale(1.03)';
        // Shrink back after 200ms
        setTimeout(() => {
          word.style.transform = 'scale(1)';
        }, 200);
      }, startDelay + (index * wordDelay));
    });
  }

  // Initial page load animation (wait for fadeInUp to complete)
  function initTaglineWordGrow() {
    animateTaglineWords(1400);
  }

  // Listen for home navigation clicks to retrigger animation
  function initHomeNavListener() {
    // Match home links: "#", "#home", or "/"
    document.querySelectorAll('a[href="#"], a[href="#home"], a[href="/"]').forEach((link) => {
      link.addEventListener('click', () => {
        // Short delay for click retrigger (no need to wait for fadeInUp)
        setTimeout(() => animateTaglineWords(300), 100);
      });
    });
  }

  initCounters();
  initTypewriter();
  initContactButton();
  initTaglineWordGrow();
  initHomeNavListener();
  document.addEventListener('astro:after-swap', () => {
    initCounters();
    initTypewriter();
    initContactButton();
    initTaglineWordGrow();
    initHomeNavListener();
  });
</script>
