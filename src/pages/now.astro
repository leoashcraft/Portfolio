---
import BaseLayout from '../layouts/BaseLayout.astro';
import { profile } from '../data/profile';
import ArcadeDecorations from '../components/common/ArcadeDecorations.astro';
import ExternalLinkModal from '../components/common/ExternalLinkModal.astro';
---

<BaseLayout
  title="Now - Leo Ashcraft"
  description="What I'm currently focused on - work, learning, travel, projects, and hobbies."
>
  <section class="relative min-h-screen py-24 px-4 overflow-hidden">
    <!-- Arcade decorations -->
    <ArcadeDecorations variant="sparse" />

    <div class="max-w-3xl mx-auto relative z-10">
      <!-- Breadcrumbs -->
      <nav class="mb-8" aria-label="Breadcrumb">
        <ol class="flex items-center gap-2 text-sm text-gray-400">
          <li>
            <a href="/" class="hover:text-neon-pink transition-colors">{profile.name}</a>
          </li>
          <li class="text-gray-600">/</li>
          <li class="text-neon-cyan">Now</li>
        </ol>
      </nav>

      <!-- Page Header -->
      <header class="mb-12">
        <h1 class="text-4xl md:text-5xl font-bold mb-4">
          <span class="gradient-text">Now</span>
        </h1>
        <p class="text-gray-400 text-sm">
          Updated January 27, 2026
        </p>
      </header>

      <!-- Content -->
      <div class="space-y-10 now-content">
        <!-- I'm employed -->
        <article class="now-section">
          <h2 class="text-xl font-semibold text-neon-pink mb-3 flex items-center gap-2">
            <span class="text-2xl">üíº</span>
            I'm employed
          </h2>
          <p class="text-gray-300 leading-relaxed">
            I work full-time as a full-stack software developer at <a href="https://parker.edu" class="external-link text-neon-cyan hover:text-neon-pink transition-colors" data-external-url="https://parker.edu">Parker University</a> in Dallas, TX. I'm living my best life with a four-day remote schedule and a once-a-week (Tuesday) hour-plus drive into the office. It's a balance that works surprisingly well.
          </p>
        </article>

        <!-- I'm planning -->
        <article class="now-section">
          <h2 class="text-xl font-semibold text-neon-cyan mb-3 flex items-center gap-2">
            <span class="text-2xl">üìã</span>
            I'm planning
          </h2>
          <p class="text-gray-300 leading-relaxed">
            I'm deep in planning mode for our annual <a href="https://lasvegas.parkerseminars.com" class="external-link text-neon-cyan hover:text-neon-pink transition-colors" data-external-url="https://lasvegas.parkerseminars.com">Parker Seminars - Las Vegas</a> event - a world-class production that brings together roughly 5,000 dedicated professionals each year. I genuinely enjoy the full lifecycle: setup, execution, and teardown. Last year I also had the opportunity to assist with seminars in Las Vegas, Dallas, and Miami.
          </p>
        </article>

        <!-- I'm learning -->
        <article class="now-section">
          <h2 class="text-xl font-semibold text-neon-yellow mb-3 flex items-center gap-2">
            <span class="text-2xl">üìö</span>
            I'm learning
          </h2>
          <p class="text-gray-300 leading-relaxed">
            I attended <a href="https://jam.jenzabar.com" class="external-link text-neon-cyan hover:text-neon-pink transition-colors" data-external-url="https://jam.jenzabar.com">Jenzabar's Annual Meeting</a> (JAM 2025) in Nashville, TN, where I expanded my understanding of <a href="https://jenzabar.com" class="external-link text-neon-cyan hover:text-neon-pink transition-colors" data-external-url="https://jenzabar.com">Jenzabar</a> and <a href="https://www.salesforce.com" class="external-link text-neon-cyan hover:text-neon-pink transition-colors" data-external-url="https://www.salesforce.com">Salesforce</a> while connecting with like-minded folks focused on higher education and student success.
          </p>
        </article>

        <!-- I'm traveling -->
        <article class="now-section">
          <h2 class="text-xl font-semibold text-neon-orange mb-3 flex items-center gap-2">
            <span class="text-2xl">‚úàÔ∏è</span>
            I'm traveling
          </h2>
          <p class="text-gray-300 leading-relaxed">
            I flew my family into Miami on the final day of <a href="https://miami.parkerseminars.com" class="external-link text-neon-cyan hover:text-neon-pink transition-colors" data-external-url="https://miami.parkerseminars.com">Parker Seminars - Miami</a>, rented a BMW X6, and drove straight to Disney World. We stayed at Animal Kingdom Lodge and hit Animal Kingdom, Magic Kingdom, and EPCOT - equal parts chaos, magic, and core memories.
          </p>
        </article>

        <!-- I'm adopting AI -->
        <article class="now-section">
          <h2 class="text-xl font-semibold text-neon-purple mb-3 flex items-center gap-2">
            <span class="text-2xl">ü§ñ</span>
            I'm adopting AI
          </h2>
          <p class="text-gray-300 leading-relaxed">
            After years of deliberately avoiding AI-assisted coding out of fear of dulling my own skills, Anthropic's <a href="https://code.claude.com" class="external-link text-neon-cyan hover:text-neon-pink transition-colors" data-external-url="https://code.claude.com">Claude Code</a> has slowly crept into my workflow. I finally gave in - cautiously - and it's been a net positive. I mostly use it for wireframing ideas and quickly diagnosing issues like mismatched arrays or malformed JSON. Full-on "vibe coding" is still discouraged (for me), but the power is undeniable - and ignoring it entirely feels riskier than learning to use it well.
          </p>
        </article>

        <!-- I'm creating -->
        <article class="now-section">
          <h2 class="text-xl font-semibold text-neon-green mb-3 flex items-center gap-2">
            <span class="text-2xl">üõ†Ô∏è</span>
            I'm creating
          </h2>
          <p class="text-gray-300 leading-relaxed">
            I have several side projects in motion, including this portfolio. My most significant project right now is <a href="https://roadtripbeaver.com" class="external-link text-neon-cyan hover:text-neon-pink transition-colors" data-external-url="https://roadtripbeaver.com">Roadtrip Beaver</a>, followed by <a href="https://navarrocounty.com" class="external-link text-neon-cyan hover:text-neon-pink transition-colors" data-external-url="https://navarrocounty.com">Navarro County</a>, and then <a href="https://clancompass.com" class="external-link text-neon-cyan hover:text-neon-pink transition-colors" data-external-url="https://clancompass.com">Clan Compass</a>. Each scratches a different itch and keeps me building outside of work.
          </p>
        </article>

        <!-- I'm owning it -->
        <article class="now-section">
          <h2 class="text-xl font-semibold text-neon-pink mb-3 flex items-center gap-2">
            <span class="text-2xl">üéØ</span>
            I'm owning it
          </h2>
          <p class="text-gray-300 leading-relaxed">
            I genuinely love the work I do at Parker University and the people I work with on the marketing team. My favorite project has been integrating <a href="https://www.searchstax.com" class="external-link text-neon-cyan hover:text-neon-pink transition-colors" data-external-url="https://www.searchstax.com">SearchStax</a> into <a href="https://parker.edu/search" class="external-link text-neon-cyan hover:text-neon-pink transition-colors" data-external-url="https://parker.edu/search">Parker's Multi-site Search</a>, building modal-based, asynchronous instant search for a smoother user experience. A close second is the <a href="https://parker.edu/pathways" class="external-link text-neon-cyan hover:text-neon-pink transition-colors" data-external-url="https://parker.edu/pathways">Career Pathways</a> application, which helps prospective students explore where their education can take them. Third - and arguably most impactful - is the <a href="https://parker.edu/application" class="external-link text-neon-cyan hover:text-neon-pink transition-colors" data-external-url="https://parker.edu/application">Parker Student Application</a>, which integrates Salesforce Communities directly into the site and has significantly improved both user experience and enrollment numbers.
          </p>
        </article>

        <!-- I'm hobbying -->
        <article class="now-section">
          <h2 class="text-xl font-semibold text-neon-cyan mb-3 flex items-center gap-2">
            <span class="text-2xl">üêî</span>
            I'm hobbying
          </h2>
          <div class="text-gray-300 leading-relaxed space-y-4">
            <p>
              Despite a busy year, I <button type="button" class="hobby-preview-link text-neon-cyan hover:text-neon-pink transition-colors cursor-pointer bg-transparent border-none p-0 font-inherit text-inherit" data-tile="/img/hobby/hobby-chickens-tile.avif" data-full="/img/hobby/hobby-chickens.avif" data-alt="Chicken run">managed to build a chicken run</button> using a greenhouse frame connected to an insulated metal building. I added an <a href="https://www.omlet.us/smart-automatic-chicken-coop-door-opener/" class="external-link text-neon-cyan hover:text-neon-pink transition-colors" data-external-url="https://www.omlet.us/smart-automatic-chicken-coop-door-opener/">Omlet automatic door</a> (chosen specifically for its exposed API, which I still haven't explored). Seasonal tweaks include dark plastic roofing for winter heat absorption and a white tarp in summer to reflect sunlight. We now have a dozen chickens, including one rooster.
            </p>
            <p>
              I'm also nearly finished <button type="button" class="hobby-preview-link text-neon-cyan hover:text-neon-pink transition-colors cursor-pointer bg-transparent border-none p-0 font-inherit text-inherit" data-tile="/img/hobby/hobby-playhouse-tile.avif" data-full="/img/hobby/hobby-playhouse.avif" data-alt="Playhouse insulation">insulating my daughter's playhouse</button>, and I've had a great time designing and building a <button type="button" class="hobby-preview-link text-neon-cyan hover:text-neon-pink transition-colors cursor-pointer bg-transparent border-none p-0 font-inherit text-inherit" data-tile="/img/hobby/hobby-solar-tile.avif" data-full="/img/hobby/hobby-solar.avif" data-alt="Solar power system">solar power system</button>: 24V, 1180W of 25% high-efficiency panels, and a 200Ah LiFePO4 battery. I'm already eyeing a battery upgrade - ideally doubling or tripling capacity. Eventually, this system will power the playhouse along with fans and lighting for the chicken coop.
            </p>
          </div>
        </article>

        <!-- What is a Now page? -->
        <div class="mt-16 pt-8 border-t border-neon-pink/20">
          <p class="text-gray-500 text-sm">
            <a href="https://nownownow.com/about" class="external-link hover:text-neon-pink transition-colors" data-external-url="https://nownownow.com/about">What is a now page?</a>
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- External Link Modal -->
  <ExternalLinkModal />

  <!-- Hobby Image Preview (floating on hover) -->
  <div id="hobby-preview" class="fixed pointer-events-none z-50 opacity-0 transition-opacity duration-200">
    <div class="rounded-lg overflow-hidden border border-neon-cyan/30 shadow-lg shadow-neon-cyan/20">
      <img id="hobby-preview-img" src="" alt="" class="w-48 h-auto" />
    </div>
  </div>

  <!-- Hobby Image Modal -->
  <div
    id="hobby-modal"
    class="fixed inset-0 z-[80] hidden items-center justify-center p-4"
    role="dialog"
    aria-modal="true"
    aria-labelledby="hobby-modal-title"
  >
    <div class="absolute inset-0 bg-night-900/95 backdrop-blur-sm" data-hobby-modal-backdrop></div>
    <div class="relative max-w-4xl max-h-[90vh]">
      <button
        type="button"
        class="absolute -top-12 right-0 w-10 h-10 rounded-full bg-night-700 border border-neon-cyan/20 flex items-center justify-center text-gray-400 hover:text-neon-cyan hover:border-neon-cyan/40 transition-colors"
        data-hobby-modal-close
        aria-label="Close modal"
      >
        <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
        </svg>
      </button>
      <img id="hobby-modal-img" src="" alt="" class="max-w-full max-h-[85vh] rounded-lg border border-neon-cyan/30" />
      <p id="hobby-modal-title" class="sr-only"></p>
    </div>
  </div>

  <script>
    function initHobbyPreviews() {
      const preview = document.getElementById('hobby-preview');
      const previewImg = document.getElementById('hobby-preview-img') as HTMLImageElement;
      const modal = document.getElementById('hobby-modal');
      const modalImg = document.getElementById('hobby-modal-img') as HTMLImageElement;
      const modalTitle = document.getElementById('hobby-modal-title');
      const modalBackdrop = document.querySelector('[data-hobby-modal-backdrop]');
      const modalClose = document.querySelector('[data-hobby-modal-close]');
      const links = document.querySelectorAll('.hobby-preview-link');

      if (!preview || !previewImg || !modal || !modalImg) return;

      const loadedImages = new Set<string>();

      links.forEach((link) => {
        const tileUrl = link.getAttribute('data-tile') || '';
        const fullUrl = link.getAttribute('data-full') || '';
        const alt = link.getAttribute('data-alt') || '';

        // Hover: show preview and lazy load tile image
        link.addEventListener('mouseenter', (e) => {
          // Lazy load tile image if not already loaded
          if (!loadedImages.has(tileUrl)) {
            previewImg.src = tileUrl;
            loadedImages.add(tileUrl);
          } else {
            previewImg.src = tileUrl;
          }
          previewImg.alt = alt;
          preview.style.opacity = '1';
        });

        link.addEventListener('mousemove', (e) => {
          const mouseEvent = e as MouseEvent;
          const offsetX = 15;
          const offsetY = 15;

          // Position preview near cursor
          let x = mouseEvent.clientX + offsetX;
          let y = mouseEvent.clientY + offsetY;

          // Keep within viewport
          const previewRect = preview.getBoundingClientRect();
          if (x + previewRect.width > window.innerWidth) {
            x = mouseEvent.clientX - previewRect.width - offsetX;
          }
          if (y + previewRect.height > window.innerHeight) {
            y = mouseEvent.clientY - previewRect.height - offsetY;
          }

          preview.style.left = `${x}px`;
          preview.style.top = `${y}px`;
        });

        link.addEventListener('mouseleave', () => {
          preview.style.opacity = '0';
        });

        // Click: open modal with full image
        link.addEventListener('click', () => {
          preview.style.opacity = '0';
          modalImg.src = fullUrl;
          modalImg.alt = alt;
          if (modalTitle) modalTitle.textContent = alt;
          modal.classList.remove('hidden');
          modal.classList.add('flex');
          document.body.style.overflow = 'hidden';
        });
      });

      // Close modal handlers
      function closeModal() {
        modal.classList.add('hidden');
        modal.classList.remove('flex');
        document.body.style.overflow = '';
      }

      modalBackdrop?.addEventListener('click', closeModal);
      modalClose?.addEventListener('click', closeModal);

      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && !modal.classList.contains('hidden')) {
          closeModal();
        }
      });
    }

    initHobbyPreviews();
    document.addEventListener('astro:after-swap', initHobbyPreviews);
  </script>
</BaseLayout>

<style>
  .now-section {
    padding: 1.5rem;
    background: rgba(255, 255, 255, 0.02);
    border: 1px solid rgba(255, 0, 255, 0.1);
    border-radius: 0.75rem;
    transition: border-color 0.3s ease, background-color 0.3s ease;
  }

  .now-section:hover {
    border-color: rgba(255, 0, 255, 0.3);
    background: rgba(255, 255, 255, 0.04);
  }

  /* Cascade animation on page load */
  .now-content .now-section {
    opacity: 0;
    transform: translateY(20px);
    animation: fadeInUp 0.5s ease-out forwards;
  }

  .now-content .now-section:nth-child(1) { animation-delay: 0.1s; }
  .now-content .now-section:nth-child(2) { animation-delay: 0.2s; }
  .now-content .now-section:nth-child(3) { animation-delay: 0.3s; }
  .now-content .now-section:nth-child(4) { animation-delay: 0.4s; }
  .now-content .now-section:nth-child(5) { animation-delay: 0.5s; }
  .now-content .now-section:nth-child(6) { animation-delay: 0.6s; }
  .now-content .now-section:nth-child(7) { animation-delay: 0.7s; }
  .now-content .now-section:nth-child(8) { animation-delay: 0.8s; }

  @keyframes fadeInUp {
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Disable animations when preference set */
  [data-animations="disabled"] .now-content .now-section {
    opacity: 1 !important;
    transform: none !important;
    animation: none !important;
  }

  /* High contrast adjustments */
  [data-theme="high-contrast"] .now-section {
    border-color: rgba(255, 255, 255, 0.3);
  }

  [data-theme="high-contrast"] .now-section:hover {
    border-color: rgba(255, 255, 255, 0.5);
  }

  [data-theme="high-contrast-light"] .now-section {
    border-color: rgba(0, 0, 0, 0.2);
    background: rgba(0, 0, 0, 0.02);
  }

  [data-theme="high-contrast-light"] .now-section:hover {
    border-color: rgba(0, 0, 0, 0.4);
  }

  /* Footer border in high contrast */
  [data-theme="high-contrast"] .border-neon-pink\/20 {
    border-color: rgba(255, 255, 255, 0.2) !important;
  }

  [data-theme="high-contrast-light"] .border-neon-pink\/20 {
    border-color: rgba(0, 0, 0, 0.2) !important;
  }

  /* Hobby preview link styling */
  .hobby-preview-link {
    text-decoration: underline;
    text-decoration-style: dotted;
    text-underline-offset: 3px;
  }

  .hobby-preview-link:hover {
    text-decoration-style: solid;
  }
</style>
